(this.webpackJsonpinfox=this.webpackJsonpinfox||[]).push([[4],{212:function(t,e,a){"use strict";a.r(e);var s=a(20),c=a(21),n=a(23),i=a(22),o=a(14),r=a(0),l=a.n(r),d=a(13),j=a(11),b=a(52),h=a(33),m=a(6),u=function(t){Object(n.a)(a,t);var e=Object(i.a)(a);function a(t){var c;return Object(s.a)(this,a),(c=e.call(this,t)).state={data:[]},c}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var t=this;b.a.get("/quotation/").then((function(e){t.setState({data:e.data}),console.log(e.data)}))}},{key:"render",value:function(){var t=this.state.data,e=null,a=null,s=null,c=null;return this.state.data.length>0&&(e=t.filter((function(t){return"draft"===t.status})).length,c=t.filter((function(t){return"ready"===t.status})).length,a=t.filter((function(t){return"submitted"===t.status})).length,s=t.filter((function(t){return"approved"===t.status})).length),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"d-sm-flex align-items-center justify-content-between mb-4",children:[Object(m.jsx)("h1",{className:"h3 mb-0 text-gray-800",children:"Quotations"}),Object(m.jsxs)(d.c,{className:"d-inline-block btn btn-sm btn-primary shadow-sm",to:"/quotation/quick/edit/new",children:[Object(m.jsx)("i",{className:"fas fa-plus fa-sm text-white-50"})," Quick"]})]}),Object(m.jsxs)("div",{className:"row",children:[e>0?Object(m.jsx)("div",{className:"col-xl-3 col-md-6 mb-4",children:Object(m.jsx)("div",{className:"card border-left-danger shadow h-100 py-2",children:Object(m.jsx)("div",{className:"card-body",children:Object(m.jsxs)("div",{className:"row no-gutters align-items-center",children:[Object(m.jsxs)("div",{className:"col mr-2",children:[Object(m.jsx)(d.c,{to:"/quotation/draft",className:"text-decoration-none",children:Object(m.jsx)("div",{className:"text-sm font-weight-bold text-danger text-uppercase mb-1",children:"Drafts"})}),Object(m.jsx)("div",{className:"h5 mb-0 font-weight-bold text-gray-800",children:e})]}),Object(m.jsx)("div",{className:"col-auto",children:Object(m.jsx)("i",{className:"fas fa-file fa-2x text-gray-300"})})]})})})},"draft_count"):null,c>0?Object(m.jsx)("div",{className:"col-xl-3 col-md-6 mb-4",children:Object(m.jsx)("div",{className:"card border-left-info shadow h-100 py-2",children:Object(m.jsx)("div",{className:"card-body",children:Object(m.jsxs)("div",{className:"row no-gutters align-items-center",children:[Object(m.jsxs)("div",{className:"col mr-2",children:[Object(m.jsx)(d.c,{to:"/quotation/ready",className:"text-decoration-none",children:Object(m.jsx)("div",{className:"text-sm font-weight-bold text-info text-uppercase mb-1",children:"Ready"})}),Object(m.jsx)("div",{className:"h5 mb-0 font-weight-bold text-gray-800",children:c})]}),Object(m.jsx)("div",{className:"col-auto",children:Object(m.jsx)("i",{className:"fas fa-file fa-2x text-gray-300"})})]})})})},"ready_count"):null,a>0?Object(m.jsx)("div",{className:"col-xl-3 col-md-6 mb-4",children:Object(m.jsx)("div",{className:"card border-left-warning shadow h-100 py-2",children:Object(m.jsx)("div",{className:"card-body",children:Object(m.jsxs)("div",{className:"row no-gutters align-items-center",children:[Object(m.jsxs)("div",{className:"col mr-2",children:[Object(m.jsx)(d.c,{to:"/quotation/submitted",className:"text-decoration-none",children:Object(m.jsx)("div",{className:"text-sm font-weight-bold text-warning text-uppercase mb-1",children:"Submitted"})}),Object(m.jsx)("div",{className:"h5 mb-0 font-weight-bold text-gray-800",children:a})]}),Object(m.jsx)("div",{className:"col-auto",children:Object(m.jsx)("i",{className:"fas fa-file fa-2x text-gray-300"})})]})})})},"submitted_count"):null,s>0?Object(m.jsx)("div",{className:"col-xl-3 col-md-6 mb-4",children:Object(m.jsx)("div",{className:"card border-left-success shadow h-100 py-2",children:Object(m.jsx)("div",{className:"card-body",children:Object(m.jsxs)("div",{className:"row no-gutters align-items-center",children:[Object(m.jsxs)("div",{className:"col mr-2",children:[Object(m.jsx)(d.c,{to:"/quotation/approved",className:"text-decoration-none",children:Object(m.jsx)("div",{className:"text-sm font-weight-bold text-success text-uppercase mb-1",children:"Approved"})}),Object(m.jsx)("div",{className:"h5 mb-0 font-weight-bold text-gray-800",children:s})]}),Object(m.jsx)("div",{className:"col-auto",children:Object(m.jsx)("i",{className:"fas fa-file fa-2x text-gray-300"})})]})})})},"approved_count"):null]})]})}}]),a}(l.a.Component);u=Object(j.h)(u);var x=function(t){Object(n.a)(a,t);var e=Object(i.a)(a);function a(t){var c;return Object(s.a)(this,a),(c=e.call(this,t)).loadData=function(){b.a.get("/quotation/list/".concat(c.action)).then((function(t){c.setState({data:t.data}),console.log(t.data)}))},c.goBack=function(){c.props.history.goBack()},c.action=c.props.action,c.title=c.props.title,c.state={data:[]},c}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{children:Object(m.jsxs)("h4",{children:[Object(m.jsx)("button",{onClick:this.goBack,className:"btn btn-link btn-lg",children:Object(m.jsx)("i",{className:"fa fa-arrow-left"})}),this.title]})}),Object(m.jsxs)("table",{className:"table",children:[Object(m.jsxs)("tbody",{children:[Object(m.jsx)("th",{children:"File Name"}),Object(m.jsx)("th",{children:"Firm"}),Object(m.jsx)("th",{children:"Party"}),Object(m.jsx)("th",{children:"Date"}),Object(m.jsx)("th",{children:"Actions"})]}),Object(m.jsx)("tbody",{children:this.state.data.map((function(t,e){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:t.name}),Object(m.jsx)("td",{children:t.firm.toUpperCase()}),Object(m.jsx)("td",{children:t.party}),Object(m.jsx)("td",{children:new Date(t.date).toDateString()}),Object(m.jsxs)("td",{children:["draft"===t.status?Object(m.jsx)(d.c,{className:"btn btn-link",to:"/quotation/quick/edit/".concat(t.id),children:Object(m.jsx)("i",{className:"fa fa-edit"})}):null,"draft"===t.status?Object(m.jsx)(d.c,{className:"btn btn-danger btn-sm mr-1 ml-1",to:"/quotation/quick/edit/".concat(t.id),children:Object(m.jsx)("i",{className:"fa fa-trash"})}):null,0===t.permission&&"draft"===t.status?Object(m.jsxs)("button",{className:"btn btn-primary btn-sm",children:[Object(m.jsx)("i",{className:"fa fa-check-circle"})," Apply"]}):null,1===t.permission&&"draft"===t.status?Object(m.jsx)("span",{className:"btn btn-danger btn-sm",children:"Rejected"}):null,"ready"===t.status&&1===t.permission?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(d.c,{className:"btn btn-warning btn-sm mr-1 ml-1",to:"/quotation/quick/edit/".concat(t.id),children:Object(m.jsx)("i",{className:"fa fa-print"})}),Object(m.jsx)(d.c,{className:"btn btn-secondary btn-sm mr-1 ml-1",to:"/quotation/quick/edit/".concat(t.id),children:Object(m.jsx)("i",{className:"fa fa-eye"})}),Object(m.jsxs)(d.c,{className:"btn btn-success btn-sm mr-1 ml-1",to:"/quotation/quick/edit/".concat(t.id),children:[Object(m.jsx)("i",{className:"fa fa-check"})," Submit"]})]}):null,"submitted"===t.status?Object(m.jsxs)("button",{className:"btn btn-success btn-sm m-1",children:[Object(m.jsx)("i",{className:"fa fa-check-circle"})," Approved"]}):null,"submitted"===t.status?Object(m.jsxs)("button",{className:"btn btn-danger btn-sm m-1",children:[Object(m.jsx)("i",{className:"fa fa-times-circle"})," Disposed"]}):null]})]})}))})]})]})}}]),a}(l.a.Component);x=Object(j.h)(x);var O=function(t){Object(n.a)(a,t);var e=Object(i.a)(a);function a(t){var c;return Object(s.a)(this,a),(c=e.call(this,t)).loadData=function(){b.a.get("/quotation/quick/".concat(c.props.match.params.id)).then((function(t){c.setState({quotation:JSON.parse(t.data.blob)})}))},c.saveForm=function(t){if(t.preventDefault(),c.state.quotation.total>0){var e=c.state.quotation;b.a.post("/quotation/quick/".concat(c.props.match.params.id,"?action=").concat(c.state.action),e).then((function(t){o.b.success("Saved"),c.props.history.replace("/quotation/draft")}))}else o.b.fail("Add data First")},c.goBack=function(){c.props.history.goBack()},c.addRow=function(){var t=c.state.quotation,e=t.items,a=[];e.length>0&&(a=e.map((function(t){return t.edit=!1,t})));a.push({name:"",rate:0,qty:1,edit:!0,amount:0}),t.items=a,c.setState({quotation:t,edit:!0})},c.editRow=function(t){var e=c.state.quotation,a=e.items;a.map((function(t){return t.edit=!1,t}))[t].edit=!0,c.setState({quotation:e,editor:a[t],edit:!0})},c.saveRow=function(t){var e=c.state.editor;e.amount=(e.qty*e.rate).toFixed(2);var a=c.state.quotation,s=a.items.map((function(t){return t.edit=!1,t}));s[t]=JSON.parse("".concat(JSON.stringify(e))),s[t].edit=!1,a.items=s,a.total=s.reduce((function(t,e){return t+e.qty*e.rate}),0).toFixed(2),c.setState({quotation:a,editor:{name:"",rate:0,qty:1,edit:!0},edit:!1})},c.delRow=function(t){var e=c.state.quotation;e.items.splice(t,1),c.setState({quotation:e,editor:{name:"",rate:0,qty:1,edit:!0},edit:!1})},c.onRowInput=function(t){var e=c.state.editor;e[t.target.getAttribute("name")]=t.target.value,c.setState({editor:e})},c.onChangeInput=function(t){var e=c.state.quotation;e[t.target.getAttribute("name")]=t.target.value,c.setState({quotation:e})},c.onFoucus_file=function(t){if(""===t.target.value){var e=c.state.quotation;e[t.target.getAttribute("name")]="_".concat(c.context.u_name,"_[ ").concat(c.context.u_designation," ]_").concat((new Date).toLocaleString()),c.setState({quotation:e}),t.target.setSelectionRange(0,0)}},c.adjustHeight=function(t){t.target.style.height="inherit",t.target.style.height="".concat(t.target.scrollHeight,"px")},c.state={action:"edit",quotation:{no:"",date:"",validity:"",items:[],party_name:"",party_address:"",party_phone:"",file_name:"",firm:"",total:0,discount:0},editor:{name:"",rate:0,qty:1,edit:!0,amount:0},edit:!1},c}return Object(c.a)(a,[{key:"componentDidMount",value:function(){"new"===this.props.match.params.id?this.setState({action:"add"}):this.loadData()}},{key:"render",value:function(){var t=this;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{children:Object(m.jsxs)("h4",{children:[Object(m.jsx)("button",{onClick:this.goBack,className:"btn btn-link btn-lg",children:Object(m.jsx)("i",{className:"fa fa-arrow-left"})}),"Quotation Editor"]})}),Object(m.jsx)("form",{className:"row justify-content-center",onSubmit:this.saveForm,children:Object(m.jsxs)("div",{className:"card shadow col-xl-10",children:[Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsxs)("div",{className:"form-group row",children:[Object(m.jsx)("label",{className:"col-6 d-flex align-items-center justify-content-center",children:Object(m.jsx)("b",{children:"File Name"})}),Object(m.jsx)("div",{className:"col-6",children:Object(m.jsx)("input",{type:"text",value:this.state.quotation.file_name,onChange:this.onChangeInput,name:"file_name",required:!0,className:"form-control",autoFocus:!0,onFocus:this.onFoucus_file})})]}),Object(m.jsxs)("div",{className:"form-group row",children:[Object(m.jsx)("label",{className:"col-6 d-flex align-items-center justify-content-center",children:Object(m.jsx)("b",{children:"Choose Firm"})}),Object(m.jsx)("div",{className:"col-6",children:Object(m.jsxs)("select",{name:"firm",value:this.state.quotation.firm,required:!0,onChange:this.onChangeInput,className:"form-control",children:[Object(m.jsx)("option",{value:"",disabled:!0,children:"choose"}),Object(m.jsx)("option",{value:"azba_india",children:"Azba India"}),Object(m.jsx)("option",{value:"dream_india",children:"Dream India"})]})})]}),Object(m.jsx)("hr",{}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-8",children:Object(m.jsxs)("div",{className:"col-md-10",children:[Object(m.jsx)("h5",{children:"Bill To"}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("input",{type:"text",required:!0,value:this.state.quotation.party_name,name:"party_name",onChange:this.onChangeInput,className:"form-control form-control-sm border-0 mb-1",id:"formGroupExampleInput",placeholder:"Name"}),Object(m.jsx)("textarea",{type:"text",required:!0,value:this.state.quotation.party_address,name:"party_address",onChange:this.onChangeInput,onInput:this.adjustHeight,onLoad:this.adjustHeight,on:!0,className:"form-control form-control-sm border-0 mb-1",style:{overflow:"hidden"},rows:"4",id:"formGroupExampleInput",placeholder:"Address"}),Object(m.jsx)("input",{type:"text",value:this.state.quotation.party_phone,name:"party_phone",onChange:this.onChangeInput,className:"form-control form-control-sm border-0 mb-1",id:"formGroupExampleInput",placeholder:"Phone"})]})]})}),Object(m.jsxs)("div",{className:"col-md-4",children:[Object(m.jsx)("h5",{children:"\xa0"}),Object(m.jsx)("table",{className:"table table-bordered table-sm tex-center",children:Object(m.jsxs)("tbody",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Quotation No. "}),Object(m.jsx)("td",{children:Object(m.jsx)("input",{className:"form-control form-control-sm border-0",type:"text",value:this.state.quotation.no,name:"no",onChange:this.onChangeInput})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Date "}),Object(m.jsx)("td",{children:Object(m.jsx)("input",{required:!0,className:"form-control form-control-sm border-0",type:"date",value:this.state.quotation.date,name:"date",onChange:this.onChangeInput})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Validity "}),Object(m.jsx)("td",{children:Object(m.jsx)("input",{required:!0,className:"form-control form-control-sm border-0",type:"date",value:this.state.quotation.validity,name:"validity",onChange:this.onChangeInput})})]})]})})]})]}),Object(m.jsxs)("table",{className:"table table-sm table-bordered text-center table-responsive-sm ",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"SI No."}),Object(m.jsx)("th",{scope:"col",children:"Description"}),Object(m.jsx)("th",{children:"Rate"}),Object(m.jsx)("th",{children:"Quantity"}),Object(m.jsx)("th",{children:"Amount"}),!0===this.state.edit?Object(m.jsx)("th",{}):null]})}),Object(m.jsx)("tbody",{children:this.state.quotation.items.map((function(e,a){if(!0===e.edit){var s=(t.state.editor.qty*t.state.editor.rate).toFixed(2);return Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{scope:"col",children:Object(m.jsx)("button",{onClick:function(){t.delRow(a)},className:"btn btn-link ml-2",children:Object(m.jsx)("i",{className:"fa fa-trash"})})}),Object(m.jsx)("td",{children:Object(m.jsx)("input",{className:"form-control",autoComplete:"false",type:"text",onChange:t.onRowInput,name:"name",value:t.state.editor.name,autoFocus:!0})}),Object(m.jsx)("td",{className:"col-md-1",children:Object(m.jsx)("input",{className:"form-control ",type:"number",onChange:t.onRowInput,name:"rate",value:t.state.editor.rate})}),Object(m.jsx)("td",{className:"col-md-1",children:Object(m.jsx)("input",{maxLength:3,className:"form-control ",type:"number",onChange:t.onRowInput,name:"qty",value:t.state.editor.qty})}),Object(m.jsxs)("td",{children:["\u20b9 ",s]}),Object(m.jsx)("td",{children:Object(m.jsx)("button",{onClick:function(){t.saveRow(a)},className:"btn btn-success btn-circle btn-sm mr-1",children:Object(m.jsx)("i",{className:"fa fa-save"})})})]},a)}return Object(m.jsxs)("tr",{onClick:function(){t.editRow(a)},children:[Object(m.jsx)("th",{scope:"col",children:a+1}),Object(m.jsx)("td",{children:e.name}),Object(m.jsxs)("td",{children:["\u20b9 ",parseFloat(e.rate).toFixed(2)]}),Object(m.jsx)("td",{children:e.qty}),Object(m.jsxs)("td",{children:["\u20b9 ",e.amount]})]},a)}))}),Object(m.jsxs)("tfoot",{children:[!1===this.state.edit?Object(m.jsx)("tr",{children:Object(m.jsx)("td",{colSpan:6,children:Object(m.jsx)("button",{onClick:this.addRow,className:"btn btn-primary btn-circle btn-sm",children:Object(m.jsx)("i",{className:"fa fa-plus"})})})}):null,Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{className:"text-right",colSpan:4,children:" Sub Total : "}),Object(m.jsxs)("th",{children:["\u20b9 ",this.state.quotation.total," / -"]})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{className:"text-right",colSpan:4,children:" Discount(%): "}),Object(m.jsx)("th",{children:Object(m.jsx)("input",{type:"number",onChange:this.onChangeInput,value:this.state.quotation.discount,name:"discount",className:"form-control form-control-sm",required:!0})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{className:"text-right",colSpan:4,children:" Grand Total : "}),Object(m.jsxs)("th",{children:["\u20b9 ",parseInt(this.state.quotation.total)-parseInt(this.state.quotation.total)*(parseInt(this.state.quotation.discount)/100)," / -"]})]})]})]})]}),Object(m.jsx)("div",{className:"card-body text-right",children:Object(m.jsxs)("button",{type:"submit",className:"btn btn-md btn-success",children:[Object(m.jsx)("i",{className:"fa fa-save"})," Save"]})})]})}),JSON.stringify(this.state)]})}}]),a}(l.a.Component);O.contextType=h.a,O=Object(j.h)(O),e.default=function(){var t=Object(j.g)().path;return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(j.d,{children:[Object(m.jsx)(j.b,{exact:!0,path:t,component:u}),Object(m.jsx)(j.b,{exact:!0,path:"".concat(t,"/quick/edit/:id"),component:O}),Object(m.jsx)(j.b,{exact:!0,path:"".concat(t,"/submitted"),children:Object(m.jsx)(x,{title:"Submitted Quotations",action:"submitted"})}),Object(m.jsx)(j.b,{exact:!0,path:"".concat(t,"/draft"),children:Object(m.jsx)(x,{title:"Drafts",action:"draft"})}),Object(m.jsx)(j.b,{exact:!0,path:"".concat(t,"/approved"),children:Object(m.jsx)(x,{title:"Approved Quotations",action:"approved"})}),Object(m.jsx)(j.b,{exact:!0,path:"".concat(t,"/ready"),children:Object(m.jsx)(x,{title:"Quotations Print and Submit",action:"ready"})})]})})}}}]);